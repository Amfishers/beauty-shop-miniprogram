<view class="index"><cu-custom vue-id="3c50aaa2-1" isBack="{{true}}" bgColor="bg-white" bind:__l="__l" vue-slots="{{['content']}}"><view slot="content">订单详情</view></cu-custom><view class="detail text-center"><view class="header flex align-start justify-between"><view class="flex flex-direction align-start header-info"><view class="status">{{order_msg.status}}</view><view class="notice">{{order_msg.notice}}</view></view><image class="status-icon" src="{{set_status_img}}"></image></view><block wx:if="{{orderDetail.order_type==1&&orderDetail.delivery_time}}"><view data-event-opts="{{[['tap',[['goDeliveryDetail',['$event']]]]]}}" class="container address flex align-center" bindtap="__e"><view><image class="location-icon" src="{{image_path+'/delivery.png'}}"></image></view><view class="flex flex-direction align-start justify-between text-left"><view class="contact flex flex-sub align-center justify-between text-bold">{{"订单已"+(orderDetail.delivery_company?'由'+orderDetail.delivery_company:'')+"发出"}}</view><view class="location-time">{{orderDetail.delivery_time||''}}</view></view></view></block><block wx:if="{{orderDetail.order_type==1}}"><view class="container address flex align-center"><view><image class="location-icon" src="{{image_path+'/location.png'}}"></image></view><block wx:if="{{orderDetail.order_type==1}}"><view class="flex flex-direction align-start justify-between text-left" style="margin-bottom:24rpx;width:100%;"><view class="contact flex flex-sub align-center justify-between"><view class="text-bold">{{orderDetail.receiver_name}}</view><view class="text-bold">{{orderDetail.receiver_phone}}</view></view><view class="location">{{orderDetail.receiver_detail_address}}</view></view></block><block wx:else><view data-event-opts="{{[['tap',[['openLocation',['$0'],['orderDetail.storeInfo']]]]]}}" class="flex flex-direction align-start justify-between text-left" bindtap="__e"><view class="contact flex flex-sub align-center justify-between"><view>{{orderDetail.storeInfo.name}}</view><view>{{orderDetail.storeInfo.phone||''}}</view></view><view class="location">{{orderDetail.storeInfo.detailedAddress||''}}</view></view></block></view></block><view class="container goods"><view class="store flex align-center justify-between"><view class="flex flex-row align-center"><image class="store-icon" src="{{image_path+'/store-s.png'}}"></image><text class="text-bold">{{orderDetail.store_name||''}}</text></view></view><view data-event-opts="{{[['tap',[['gotoProduct',['$0'],['orderDetail.orderItem.productId']]]]]}}" class="goods" bindtap="__e"><block wx:for="{{orderDetail.items}}" wx:for-item="item" wx:for-index="index" wx:key="id"><view><block wx:if="{{orderDetail.order_type==1}}"><goods-item vue-id="{{'3c50aaa2-2-'+index}}" cover="{{item.product_pic}}" name="{{item.product_name}}" price="{{item.product_price}}" count="{{item.product_quantity}}" bind:__l="__l"></goods-item></block><block wx:else><service-items vue-id="{{'3c50aaa2-3-'+index}}" cover="{{item.product_pic}}" name="{{item.product_name}}" price="{{item.product_price}}" count="{{item.product_quantity}}" bind:__l="__l"></service-items></block></view></block></view><block wx:if="{{$root.m0}}"><view class="qrcode flex align-center justify-center flex-direction"><view class="tip">向门店出示二维码即可享受服务</view><view class="qrcode-code"><image src="{{orderDetail.service_verify_url}}" mode></image></view><view class="verify-code">{{'验证码： '+orderDetail.order_code+''}}</view></view></block><view class="flex align-center justify-between mb28"><view>订单总价</view><view>{{"￥"+orderDetail.total_amount}}</view></view><view class="flex align-center justify-between mb28"><view>优惠</view><block wx:if="{{orderDetail.coupon_amount}}"><view>{{"-￥"+orderDetail.coupon_amount}}</view></block><block wx:else><view>￥ 0</view></block></view><view class="text-right solid-top"><view class="text-right sub-msg">实付金额<text>￥<text>{{orderDetail.pay_amount}}</text></text></view></view></view><view class="container desc flex align-start justify-between"><view>备注</view><view class="remarks text-right">{{orderDetail.note||'无'}}</view></view><view class="container"><view class="flex align-center justify-between mb28"><view>订单编号</view><view class="grey-text">{{orderDetail.order_sn}}</view></view><view class="flex align-center justify-between mb28"><view>创建时间</view><view class="grey-text">{{orderDetail.create_time}}</view></view></view><block wx:if="{{orderDetail.operate_list.length>0}}"><view class="container"><view class="text-left solid-bottom mb28"><view class="record-header text-bold">订单记录</view></view><block wx:for="{{orderDetail.operateList}}" wx:for-item="note" wx:for-index="index" wx:key="index"><block><view class=" flex align-start justify-between mb28"><view class="text-left" style="width:60%;">{{note.note}}</view><view class="number text-right" style="width:40%;">{{note.createTime}}</view></view></block></block></view></block><block wx:if="{{orderDetail.service_histories.length>0}}"><view class="container"><view class="text-left solid-bottom mb28"><view class="record-header text-bold">服务记录</view></view><block wx:for="{{orderDetail.service_histories}}" wx:for-item="service" wx:for-index="index" wx:key="index"><block><view class=" flex align-start justify-between mb28"><view>{{service.use_time}}</view><view>{{service.count+"次"}}</view></view></block></block></view></block><block wx:if="{{showOptionbtn}}"><view class="operation"><block wx:if="{{orderDetail.status==0}}"><button data-event-opts="{{[['tap',[['clickBtn',['$0','$1','pay','$2'],['orderDetail.order_sn','orderDetail.id','orderDetail.pay_amount']]]]]}}" class="cu-btn bg-primary round btn" bindtap="__e">去付款</button></block><block wx:if="{{$root.m1}}"><button data-event-opts="{{[['tap',[['clickBtn',['$0','$1','refund'],['orderDetail.order_sn','orderDetail.id']]]]]}}" class="cu-btn bg-white round btn btn-refund" bindtap="__e">申请退款</button></block><block wx:if="{{orderDetail.status==2&&orderDetail.order_type==1}}"><button data-event-opts="{{[['tap',[['clickBtn',['$0','$1','confirm'],['orderDetail.order_sn','orderDetail.id']]]]]}}" class="cu-btn bg-white round btn btn-refund-progress" bindtap="__e">确认收货</button></block><block wx:if="{{orderDetail.status==3}}"><button data-event-opts="{{[['tap',[['clickBtn',['$0','$1','evaluate'],['orderDetail.order_sn','orderDetail.id']]]]]}}" class="cu-btn bg-white round btn btn-refund-progress" bindtap="__e">去评价</button></block><block wx:if="{{orderDetail.status_return==0||orderDetail.status_return==3}}"><button data-event-opts="{{[['tap',[['clickBtn',['$0','$1','refund-calcel'],['orderDetail.order_sn','orderDetail.id']]]]]}}" class="cu-btn bg-white round btn btn-refund-progress" bindtap="__e">取消退款</button></block><block wx:if="{{orderDetail.return_status==2}}"><button data-event-opts="{{[['tap',[['clickBtn',['$0','$1','refund-detail'],['orderDetail.order_sn','orderDetail.id']]]]]}}" class="cu-btn bg-white round btn btn-refund-progress" bindtap="__e">查看退款进度</button></block></view></block></view></view>