<view class="cart"><cu-custom vue-id="1775f8c0-1" isBack="{{true}}" bgColor="bg-white-heavy" bind:__l="__l" vue-slots="{{['content']}}"><view slot="content">购物车</view></cu-custom><view class="cart-main"><view class="cart-hd fixed" style="{{'top:'+(customBar+'px')+';'}}"><view class="cart-hd__main flex align-center justify-between"><text class="text">购物车</text><block wx:if="{{!disableSelectAll}}"><view data-event-opts="{{[['tap',[['e0',['$event']]]]]}}" class="default-btn" bindtap="__e">{{isedit?'完成':'管理'}}</view></block></view></view><block wx:if="{{cartListData.length}}"><view class="cart-list__main"><block wx:for="{{$root.l1}}" wx:for-item="store" wx:for-index="index" wx:key="index"><view class="cart-list"><view class="cart-list__item"><label data-event-opts="{{[['tap',[['storeCheckHandler',['$0',index],[[['cartListData','',index]]]]]]]}}" class="radio flex align-center" bindtap="__e"><checkbox class="checkbox" value="{{store.$orig.id}}" checked="{{store.$orig.check}}"></checkbox><text class="cart-list__store-name">{{store.$orig.name}}</text></label><view class="cart-list__box"><block wx:for="{{store.l0}}" wx:for-item="item" wx:for-index="cindex" wx:key="cindex"><view class="flex align-center"><label data-event-opts="{{[['tap',[['itemCheckHandler',['$0',index],[[['cartListData','',index],['products','',cindex]]]]]]]}}" bindtap="__e"><checkbox class="checkbox" checked="{{item.$orig.check}}"></checkbox></label><view class="cart-item"><view class="cart-item__img"><image class="cart-item__img-main" src="{{item.$orig.product_image}}" mode></image></view><view class="cart-item__info"><view class="cart-item__title">{{''+item.$orig.product_name+''}}</view><view class="cart-item__opt"><view class="cart-item__desc"><block wx:if="{{item.$orig.descript&&item.$orig.descript.length}}">{{'已选：'+item.g0+''}}</block></view><view class="flex align-center justify-between"><view class="cart-item__price"><block wx:if="{{isPlus}}">¥<text class="cart-item__price-main">{{item.$orig.product_plus_price}}</text><text class="cart-item__originprice">{{"¥"+item.$orig.product_price}}</text></block><block wx:else>¥<text class="cart-item__price-main">{{item.$orig.product_price}}</text></block></view><view class="cart-item__num"><block wx:if="{{isedit}}"><uni-number-box vue-id="{{'1775f8c0-2-'+index+'-'+cindex}}" min="{{0}}" value="{{item.$orig.product_num}}" max="{{item.$orig.spec.stock}}" data-event-opts="{{[['^change',[['changeNum',['$event','$0','$1'],[[['cartListData','',index],['products','',cindex]],'storeIndex']]]]]}}" bind:change="__e" bind:__l="__l"></uni-number-box></block><block wx:else><view>{{"x "+item.$orig.product_num}}</view></block></view></view></view></view></view></view></block></view></view></view></block><view class="cart-footer flex align-center justify-between"><view class="flex align-center"><label data-event-opts="{{[['tap',[['checkAllHandler',['$event']]]]]}}" class="cart-footer__label flex align-center" bindtap="__e"><checkbox class="checkbox" checked="{{isCheckedAll}}"></checkbox><text class="text">全选</text></label><block wx:if="{{!isedit}}"><view class="cart-footer__total">合计：<text class="cart-footer__price third-color">{{"¥ "+$root.g1}}</text></view></block></view><block wx:if="{{isedit}}"><view data-event-opts="{{[['tap',[['deleteCart',['$event']]]]]}}" class="cart-footer__submit cart-delete" bindtap="__e">删除</view></block><block wx:else><view data-event-opts="{{[['tap',[['goBuy',['$event']]]]]}}" class="cart-footer__submit primary-btn" bindtap="__e">结算</view></block></view></view></block><block wx:else><view class="flex align-center justify-center"><navigator class="cart-empty" url="/pages/index/index" open-type="switchTab" hover-class="none">购物车还是为空去逛逛</navigator></view></block></view></view>